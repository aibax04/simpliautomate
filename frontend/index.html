<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simplii | News to LinkedIn Automation</title>
    <link rel="stylesheet" href="static/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Plus+Jakarta+Sans:wght@300;400;600&display=swap"
        rel="stylesheet">
    <script>
        // AUTH CHECK - CRITICAL
        if (!localStorage.getItem('simplii_token')) {
            window.location.href = '/login.html';
        }
        function logout() {
            localStorage.removeItem('simplii_token');
            window.location.href = '/login.html';
        }

        // View Toggle - Content Automation vs Monitoring
        let currentView = 'content'; // 'content' or 'monitoring'

        function toggleMainView() {
            const layoutContainer = document.querySelector('.layout-container');
            const monitoringView = document.getElementById('monitoring-view');
            const sidebar = document.getElementById('sidebar');
            const switchBtn = document.getElementById('switch-view-btn');
            const switchText = document.getElementById('switch-view-text');
            const viewModeSelector = document.getElementById('view-mode-selector');

            if (currentView === 'content') {
                // Switch to Monitoring
                layoutContainer.classList.add('hidden');
                sidebar.classList.add('hidden');
                monitoringView.classList.remove('hidden');
                switchText.textContent = 'Switch to Content';
                switchBtn.classList.add('active');
                // Hide swipe view selector in monitoring mode
                if (viewModeSelector) viewModeSelector.style.display = 'none';
                currentView = 'monitoring';
                // Initialize monitoring data
                if (typeof SocialListening !== 'undefined') {
                    SocialListening.init();
                }
            } else {
                // Switch to Content Automation
                layoutContainer.classList.remove('hidden');
                sidebar.classList.remove('hidden');
                monitoringView.classList.add('hidden');
                switchText.textContent = 'Switch to Monitoring';
                switchBtn.classList.remove('active');
                // Show swipe view selector in content mode
                if (viewModeSelector) viewModeSelector.style.display = 'inline-block';
                currentView = 'content';
            }
        }

        function showMonitoringSection(section) {
            // Hide all sections
            document.querySelectorAll('.monitoring-section').forEach(el => el.classList.add('hidden'));
            // Show selected section
            document.getElementById('monitoring-' + section).classList.remove('hidden');
            // Update nav buttons
            document.querySelectorAll('.monitoring-nav-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.section === section) {
                    btn.classList.add('active');
                }
            });

            // Load saved posts when saved section is shown
            if (section === 'saved' && window.SocialListening) {
                window.SocialListening.loadSavedPosts();
            }
        }
    </script>
</head>

<body>
    <div id="app">
        <nav id="sidebar">
            <div class="sidebar-header">
                <div class="logo">SIMPLII</div>
                <div class="app-version">v1.2</div>
            </div>

            <div class="sidebar-content">
                <div class="sidebar-section">
                    <label>Main Actions</label>
                    <button id="upload-main-btn" class="sidebar-btn"
                        onclick="document.getElementById('upload-modal').classList.remove('hidden')">
                        New Source
                    </button>
                    <button id="custom-post-btn" class="sidebar-btn" onclick="window.app.showCustomPostModal()">
                        Custom Post
                    </button>
                    <button id="blog-generator-btn" class="sidebar-btn"
                        onclick="document.getElementById('blog-category-modal').classList.remove('hidden')">
                        LinkedIn Blog
                    </button>
                </div>

                <div class="sidebar-section">
                    <label>Management</label>
                    <button id="manage-products-btn" class="sidebar-btn" onclick="ProductManagement.showModal()">
                        Products
                    </button>
                    <button id="manage-scheduled-btn" class="sidebar-btn" onclick="PostScheduler.showManagementModal()">
                        Scheduled Posts
                    </button>
                    <button id="manage-linkedin-btn" class="sidebar-btn"
                        onclick="LinkedInAccounts.showManagementModal()">
                        LinkedIn Accounts
                    </button>
                    <button id="settings-btn" class="sidebar-btn"
                        onclick="document.getElementById('settings-modal').classList.remove('hidden')">
                        Connect
                    </button>
                </div>

                <div class="sidebar-section">
                    <label>Settings</label>
                    <select id="category-filter" class="sidebar-select">
                        <option value="All">All News</option>
                        <option value="HealthTech">HealthTech</option>
                        <option value="Legal">Legal</option>
                        <option value="Judiciary AI">Judiciary AI</option>
                        <option value="LLM Models">LLM Models</option>
                        <option value="Media AI">Media AI</option>
                    </select>
                </div>
            </div>

            <div class="sidebar-footer">
                <button onclick="logout()" class="sidebar-btn btn-logout">
                    Logout
                </button>
            </div>
        </nav>

        <div class="main-wrapper">
            <header id="main-header">
                <div class="header-left">
                    <div class="search-bar-container">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="search-icon">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        <input type="text" id="news-search-input" placeholder="Search specific topics...">
                    </div>
                </div>

                <div class="header-center">
                    <select id="view-mode-selector" class="header-select">
                        <option value="swipe" selected>Swipe View</option>
                        <option value="list">Row / Column View</option>
                    </select>
                </div>

                <div class="header-right">
                    <button id="switch-view-btn" class="btn-switch-view" onclick="toggleMainView()">
                        <span id="switch-view-text">Switch to Monitoring</span>
                        <svg id="switch-view-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                    </button>
                    <span id="user-display-name" class="user-id-label">loading...</span>
                </div>
            </header>

            <div class="layout-container">
                <main id="swipe-container">
                    <div id="card-stack">
                        <!-- Cards will be injected here -->
                        <div class="loading-state">
                            <div class="spinner"></div>
                            <p>Fetching latest news...</p>
                        </div>
                    </div>

                    <div id="list-view-container" class="hidden">
                        <!-- List view content injected here -->
                    </div>

                    <div id="controls">
                        <button id="skip-btn" class="control-btn skip">âœ•</button>
                        <button id="approve-btn" class="control-btn approve">âœ“</button>
                    </div>

                    <div id="swipe-view-actions" class="swipe-footer-actions"
                        style="margin-top: 20px; text-align: center;">
                        <button id="load-more-swipe-btn" onclick="window.app.loadMoreNews()" class="btn-primary"
                            style="padding: 10px 20px; font-size: 0.9em; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">
                            Reload More News
                        </button>
                    </div>
                </main>

                <aside id="queue-section">
                    <div class="section-header">
                        <h3>Activity Queue</h3>
                        <div id="queue-count" class="badge hidden">0</div>
                    </div>
                    <div id="queue-list">
                        <!-- Queue items injected here -->
                    </div>
                </aside>
            </div>

            <!-- Monitoring View Container (Hidden by Default) -->
            <div id="monitoring-view" class="monitoring-container hidden">
                <!-- Monitoring Sidebar -->
                <div class="monitoring-sidebar">
                    <div class="monitoring-sidebar-header">
                        <h3>Social Listening</h3>
                    </div>
                    <nav class="monitoring-nav">
                        <button class="monitoring-nav-btn active" data-section="feed"
                            onclick="showMonitoringSection('feed')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M4 11a9 9 0 0 1 9 9"></path>
                                <path d="M4 4a16 16 0 0 1 16 16"></path>
                                <circle cx="5" cy="19" r="1"></circle>
                            </svg>
                            Live Feed
                        </button>
                        <button class="monitoring-nav-btn" data-section="saved"
                            onclick="showMonitoringSection('saved')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                            </svg>
                            Saved Posts
                        </button>
                        <button class="monitoring-nav-btn" data-section="rules"
                            onclick="showMonitoringSection('rules')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path
                                    d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z">
                                </path>
                            </svg>
                            Rule Builder
                        </button>
                        <button class="monitoring-nav-btn" data-section="alerts"
                            onclick="showMonitoringSection('alerts')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                            </svg>
                            Alerts
                            <span id="alert-badge" class="alert-badge hidden">0</span>
                        </button>
                        <button class="monitoring-nav-btn" data-section="analytics"
                            onclick="showMonitoringSection('analytics')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <line x1="18" y1="20" x2="18" y2="10"></line>
                                <line x1="12" y1="20" x2="12" y2="4"></line>
                                <line x1="6" y1="20" x2="6" y2="14"></line>
                            </svg>
                            Analytics
                        </button>
                        <button class="monitoring-nav-btn" data-section="reports"
                            onclick="showMonitoringSection('reports')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10 9 9 9 8 9"></polyline>
                            </svg>
                            Reports
                        </button>
                    </nav>
                </div>

                <!-- Monitoring Main Content -->
                <div class="monitoring-main">
                    <!-- Live Feed Section -->
                    <div id="monitoring-feed" class="monitoring-section">
                        <div class="section-toolbar">
                            <h2>Live Content Feed</h2>
                            <div class="toolbar-actions">
                                <select id="feed-rule-filter" class="toolbar-select">
                                    <option value="all">All Rules</option>
                                </select>
                                <select id="feed-platform-filter" class="toolbar-select">
                                    <option value="all">All Platforms</option>
                                    <option value="twitter">Twitter/X</option>
                                    <option value="linkedin">LinkedIn</option>
                                    <option value="reddit">Reddit</option>
                                    <option value="news">News Sites</option>
                                </select>
                                <button class="btn-refresh" onclick="SocialListening.refreshFeed()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="23 4 23 10 17 10"></polyline>
                                        <polyline points="1 20 1 14 7 14"></polyline>
                                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15">
                                        </path>
                                    </svg>
                                    Refresh
                                </button>
                            </div>
                        </div>
                        <div id="feed-content" class="feed-grid">
                            <div class="feed-empty-state">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                </svg>
                                <h3>No monitored content yet</h3>
                                <p>Create a tracking rule to start monitoring social media content.</p>
                                <button class="btn-primary" onclick="showMonitoringSection('rules')">Create First
                                    Rule</button>
                            </div>
                        </div>
                    </div>

                    <!-- Saved Posts Section -->
                    <div id="monitoring-saved" class="monitoring-section hidden">
                        <div class="section-toolbar">
                            <h2>Saved Posts</h2>
                            <div class="toolbar-actions">
                                <button class="btn-refresh" onclick="SocialListening.loadSavedPosts()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="23 4 23 10 17 10"></polyline>
                                        <polyline points="1 20 1 14 7 14"></polyline>
                                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15">
                                        </path>
                                    </svg>
                                    Refresh
                                </button>
                            </div>
                        </div>
                        <div id="saved-posts-content" class="feed-grid">
                            <div class="feed-empty-state">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                                </svg>
                                <h3>No saved posts yet</h3>
                                <p>Click the star button on posts in the Live Feed to save them here.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Rule Builder Section -->
                    <div id="monitoring-rules" class="monitoring-section hidden">
                        <div class="section-toolbar">
                            <h2>Tracking Rules</h2>
                            <button class="btn-primary" onclick="SocialListening.showRuleModal()">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                New Rule
                            </button>
                        </div>
                        <div id="rules-list" class="rules-container">
                            <div class="rules-empty-state">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z">
                                    </path>
                                </svg>
                                <h3>No tracking rules configured</h3>
                                <p>Create rules to monitor keywords, handles, and topics across social platforms.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Alerts Section -->
                    <div id="monitoring-alerts" class="monitoring-section hidden">
                        <div class="section-toolbar">
                            <h2>Alerts</h2>
                            <div class="toolbar-actions">
                                <button class="btn-secondary" onclick="SocialListening.markAllAlertsRead()">Mark All
                                    Read</button>
                            </div>
                        </div>
                        <div id="alerts-list" class="alerts-container">
                            <div class="alerts-empty-state">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                </svg>
                                <h3>No alerts yet</h3>
                                <p>Alerts will appear here when your tracking rules match new content.</p>
                            </div>
                        </div>

                        <!-- Email Notification Settings -->
                        <div class="email-notification-settings"
                            style="margin-top: 30px; padding: 20px; background: var(--bg-secondary); border-radius: 12px; border: 1px solid var(--border);">
                            <h4
                                style="margin: 0 0 15px 0; color: var(--text-primary); display: flex; align-items: center; gap: 8px;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z">
                                    </path>
                                    <polyline points="22,6 12,13 2,6"></polyline>
                                </svg>
                                Email Notifications
                            </h4>

                            <div class="email-input-group" style="display: flex; gap: 10px; margin-bottom: 15px;">
                                <input type="email" id="user-notification-email"
                                    placeholder="Enter your email for instant alerts" value="mohdaibad04@gmail.com"
                                    style="flex: 1; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text-primary); font-size: 14px;">
                                <button onclick="saveUserNotificationEmail()" class="btn-primary"
                                    style="padding: 12px 20px; white-space: nowrap;">
                                    Save Email
                                </button>
                            </div>

                            <div class="email-settings-info"
                                style="font-size: 13px; color: var(--text-secondary); line-height: 1.5;">
                                <p style="margin: 0 0 8px 0;">
                                    <strong>ðŸ’¡ How it works:</strong> Enter your email above to receive instant
                                    notifications when your tracking rules find new content.
                                </p>
                                <p style="margin: 0;">
                                    <strong>âš¡ Instant alerts:</strong> You'll get an email as soon as new matches are
                                    found, keeping you updated in real-time.
                                </p>
                            </div>

                            <div id="email-save-status" class="status-message"
                                style="margin-top: 15px; padding: 10px; border-radius: 6px; display: none;"></div>
                        </div>
                    </div>

                    <!-- Analytics Section -->
                    <div id="monitoring-analytics" class="monitoring-section hidden">
                        <div class="section-toolbar">
                            <h2>Analytics Dashboard</h2>
                            <div class="toolbar-actions">
                                <select id="analytics-timeframe" class="toolbar-select">
                                    <option value="7d">Last 7 Days</option>
                                    <option value="30d">Last 30 Days</option>
                                    <option value="90d">Last 90 Days</option>
                                </select>
                            </div>
                        </div>

                        <!-- Analytics Grid -->
                        <div class="analytics-grid">
                            <!-- Total Posts Card -->
                            <div class="analytics-card stat-card">
                                <div class="stat-card-header">
                                    <span class="stat-label">Total Posts</span>
                                    <div class="stat-icon">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z">
                                            </path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="stat-value" id="total-posts-count">0</div>
                                <div class="stat-subtitle">Monitored content</div>
                            </div>

                            <!-- Active Rules Card -->
                            <div class="analytics-card stat-card">
                                <div class="stat-card-header">
                                    <span class="stat-label">Active Rules</span>
                                    <div class="stat-icon">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                        </svg>
                                    </div>
                                </div>
                                <div class="stat-value" id="active-rules-count">0</div>
                                <div class="stat-subtitle">Tracking rules</div>
                            </div>

                            <!-- Sentiment Distribution -->
                            <div class="analytics-card">
                                <div class="analytics-card-header">
                                    <h4>Sentiment Distribution</h4>
                                </div>
                                <div id="sentiment-chart" class="chart-container">
                                    <div class="sentiment-bars">
                                        <div class="sentiment-bar-wrapper">
                                            <div class="sentiment-bar positive" style="height: 0%;">
                                                <span class="sentiment-value">0%</span>
                                            </div>
                                            <span class="sentiment-label">Positive</span>
                                        </div>
                                        <div class="sentiment-bar-wrapper">
                                            <div class="sentiment-bar neutral" style="height: 0%;">
                                                <span class="sentiment-value">0%</span>
                                            </div>
                                            <span class="sentiment-label">Neutral</span>
                                        </div>
                                        <div class="sentiment-bar-wrapper">
                                            <div class="sentiment-bar negative" style="height: 0%;">
                                                <span class="sentiment-value">0%</span>
                                            </div>
                                            <span class="sentiment-label">Negative</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Platform Activity -->
                            <div class="analytics-card">
                                <div class="analytics-card-header">
                                    <h4>Platform Activity</h4>
                                </div>
                                <div id="platform-chart" class="chart-container">
                                    <div class="platform-stats">
                                        <div class="platform-stat">
                                            <div class="platform-stat-left">
                                                <span class="platform-icon twitter">X</span>
                                                <span class="platform-name">Twitter</span>
                                            </div>
                                            <span class="platform-count">0</span>
                                        </div>
                                        <div class="platform-stat">
                                            <div class="platform-stat-left">
                                                <span class="platform-icon linkedin">in</span>
                                                <span class="platform-name">LinkedIn</span>
                                            </div>
                                            <span class="platform-count">0</span>
                                        </div>
                                        <div class="platform-stat">
                                            <div class="platform-stat-left">
                                                <span class="platform-icon reddit">r</span>
                                                <span class="platform-name">Reddit</span>
                                            </div>
                                            <span class="platform-count">0</span>
                                        </div>
                                        <div class="platform-stat">
                                            <div class="platform-stat-left">
                                                <span class="platform-icon news">N</span>
                                                <span class="platform-name">News</span>
                                            </div>
                                            <span class="platform-count">0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Reports Section -->
                    <div id="monitoring-reports" class="monitoring-section hidden">
                        <div class="section-toolbar">
                            <h2>Export Reports</h2>
                        </div>

                        <div class="reports-container">
                            <!-- Report Configuration Card -->
                            <div class="report-config-card">
                                <div class="config-card-header">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                        <polyline points="14 2 14 8 20 8"></polyline>
                                        <line x1="16" y1="13" x2="8" y2="13"></line>
                                        <line x1="16" y1="17" x2="8" y2="17"></line>
                                    </svg>
                                    <h3>Report Configuration</h3>
                                </div>

                                <div class="report-form">
                                    <div class="form-group">
                                        <label class="form-label">Report Type</label>
                                        <select id="report-type" class="form-select">
                                            <option value="summary">Summary Report</option>
                                            <option value="detailed">Detailed Analysis</option>
                                            <option value="sentiment">Sentiment Report</option>
                                        </select>
                                        <span class="form-hint">Choose the type of report to generate</span>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">Date Range</label>
                                        <div class="date-range-inputs">
                                            <input type="date" id="report-start-date" class="form-input"
                                                placeholder="Start date">
                                            <span class="date-separator">to</span>
                                            <input type="date" id="report-end-date" class="form-input"
                                                placeholder="End date">
                                        </div>
                                        <span class="form-hint">Select the time period for your report</span>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">Include Rules</label>
                                        <select id="report-rules" class="form-select" multiple>
                                            <option value="all" selected>All Rules</option>
                                        </select>
                                        <span class="form-hint">Select specific rules or include all</span>
                                    </div>

                                    <button class="btn-generate-report" onclick="SocialListening.generateReport()">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                            <polyline points="7 10 12 15 17 10"></polyline>
                                            <line x1="12" y1="15" x2="12" y2="3"></line>
                                        </svg>
                                        Generate Report
                                    </button>
                                </div>
                            </div>

                            <!-- Report Preview Card -->
                            <div class="report-preview-card">
                                <div class="preview-card-header">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                    <h3>Report Preview</h3>
                                </div>

                                <div id="report-preview" class="report-preview-content">
                                    <div class="preview-empty-state">
                                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="1.5">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                            <line x1="16" y1="13" x2="8" y2="13"></line>
                                            <line x1="16" y1="17" x2="8" y2="17"></line>
                                            <polyline points="10 9 9 9 8 9"></polyline>
                                        </svg>
                                        <p>Configure your report settings and click Generate Report to preview</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rule Builder Modal -->
            <div id="rule-builder-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content wide">
                    <button class="close-modal-btn"
                        onclick="document.getElementById('rule-builder-modal').classList.add('hidden')">&times;</button>
                    <h2>Create Tracking Rule</h2>

                    <div class="form-group">
                        <label>Rule Name</label>
                        <input type="text" id="rule-name" placeholder="e.g. AI Startup Monitor">
                    </div>

                    <div class="form-row">
                        <div class="form-group flex-1">
                            <label>Keywords (comma separated)</label>
                            <textarea id="rule-keywords" placeholder="AI, machine learning, startup funding"
                                rows="3"></textarea>
                        </div>
                        <div class="form-group flex-1">
                            <label>Social Handles (comma separated)</label>
                            <textarea id="rule-handles" placeholder="@sequoia, @a16z, @ycombinator" rows="3"></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Platforms</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="platform-twitter" value="twitter" checked>
                                <span>Twitter/X</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="platform-linkedin" value="linkedin" checked>
                                <span>LinkedIn</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="platform-reddit" value="reddit">
                                <span>Reddit</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="platform-news" value="news" checked>
                                <span>News Sites</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group flex-1">
                            <label>Logic Type</label>
                            <select id="rule-logic">
                                <option value="keywords_only">Keywords Only</option>
                                <option value="handles_only">Handles Only</option>
                                <option value="keywords_and_handles">Keywords AND Handles</option>
                                <option value="keywords_or_handles" selected>Keywords OR Handles</option>
                                <option value="exclude_keywords">Exclude Keywords</option>
                            </select>
                        </div>
                        <div class="form-group flex-1">
                            <label>Monitoring Frequency</label>
                            <select id="rule-frequency">
                                <option value="realtime">Real-time</option>
                                <option value="hourly" selected>Hourly</option>
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-divider">Alert Settings</div>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="alert-email">
                            <span>Email Alerts</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="alert-inapp" checked>
                            <span>In-App Notifications</span>
                        </label>
                    </div>

                    <div class="modal-actions">
                        <button class="btn-secondary"
                            onclick="document.getElementById('rule-builder-modal').classList.add('hidden')">Cancel</button>
                        <button class="btn-primary" onclick="SocialListening.saveRule()">Save Rule</button>
                    </div>
                </div>
            </div>

            <!-- AI Response Modal -->
            <div id="ai-response-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content wide">
                    <button class="close-modal-btn"
                        onclick="document.getElementById('ai-response-modal').classList.add('hidden')">&times;</button>
                    <h2>Generate AI Response</h2>

                    <div class="original-content-preview">
                        <label>Original Content</label>
                        <div id="original-content-box" class="content-preview-box"></div>
                    </div>

                    <div class="form-row">
                        <div class="form-group flex-1">
                            <label>Response Intent</label>
                            <select id="response-intent">
                                <option value="supportive">Supportive Comment</option>
                                <option value="professional">Professional Response</option>
                                <option value="counter">Counter Argument</option>
                                <option value="neutral">Neutral Summary</option>
                                <option value="promotional">Promotional Reply</option>
                            </select>
                        </div>
                        <div class="form-group flex-1">
                            <label>Tone</label>
                            <select id="response-tone">
                                <option value="friendly">Friendly</option>
                                <option value="professional" selected>Professional</option>
                                <option value="casual">Casual</option>
                                <option value="formal">Formal</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Response Length</label>
                        <select id="response-length">
                            <option value="short">Short (1-2 sentences)</option>
                            <option value="medium" selected>Medium (paragraph)</option>
                            <option value="long">Long (detailed)</option>
                        </select>
                    </div>

                    <div id="ai-response-status" class="hidden" style="text-align: center; padding: 20px;">
                        <div class="mini-spinner"></div>
                        <span>Generating response...</span>
                    </div>

                    <div class="form-group">
                        <label>Generated Response</label>
                        <textarea id="generated-response" rows="6"
                            placeholder="Click 'Generate' to create a response..."></textarea>
                    </div>

                    <div class="modal-actions">
                        <button class="btn-secondary"
                            onclick="document.getElementById('ai-response-modal').classList.add('hidden')">Close</button>
                        <button class="btn-secondary" onclick="SocialListening.generateResponse()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                            </svg>
                            Generate
                        </button>
                        <button class="btn-primary" onclick="SocialListening.copyResponse()">Copy Response</button>
                    </div>
                </div>
            </div>

            <!-- Upload Modal -->
            <div id="upload-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <button class="close-modal-btn">&times;</button>
                    <h2>Ingest Content Source</h2>
                    <div class="tab-header">
                        <button class="tab-btn active" data-tab="file">File Upload</button>
                        <button class="tab-btn" data-tab="url">Link / URL</button>
                    </div>

                    <div id="tab-file" class="tab-content">
                        <div class="form-group">
                            <label>Upload Document (PDF, DOCX, TXT)</label>
                            <input type="file" id="file-input" accept=".pdf,.docx,.txt" class="file-drop-area">
                        </div>
                    </div>

                    <div id="tab-url" class="tab-content hidden">
                        <div class="form-group">
                            <label>Paste Article URL</label>
                            <input type="text" id="url-input" placeholder="https://example.com/article">
                        </div>
                    </div>

                    <div id="ingest-status" class="hidden ingest-status">
                        <div class="mini-spinner"></div>
                    </div>

                    <div class="modal-actions">
                        <button id="close-upload-modal" class="btn-secondary">Cancel</button>
                        <button id="ingest-btn" class="btn-primary">Find Related News</button>
                    </div>
                </div>
            </div>

            <!-- Custom Post Modal -->
            <div id="custom-post-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content wide">
                    <button class="close-modal-btn">&times;</button>
                    <h2>Create Custom Post</h2>
                    <p style="margin-bottom: 15px; font-size: 14px; color: var(--text-secondary);">Choose a source to
                        build your post prompt:</p>

                    <div class="tab-header" style="margin-bottom: 20px;">
                        <button class="custom-tab-btn active" data-tab="custom-prompt">Prompt</button>
                        <button class="custom-tab-btn" data-tab="custom-url">URL</button>
                        <button class="custom-tab-btn" data-tab="custom-pdf">PDF</button>
                    </div>

                    <div id="stage-custom-prompt" class="custom-tab-content">
                        <div class="form-group">
                            <label>Basic idea or concept</label>
                            <textarea id="custom-raw-prompt"
                                placeholder="e.g. A post about the future of remote work in 2026..." rows="4"
                                style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; font-family: inherit;"></textarea>
                        </div>
                    </div>

                    <div id="stage-custom-url" class="custom-tab-content hidden">
                        <div class="form-group">
                            <label>Article or Webpage URL</label>
                            <input type="text" id="custom-url-input" placeholder="https://example.com/article"
                                style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px;">
                        </div>
                    </div>

                    <div id="stage-custom-pdf" class="custom-tab-content hidden">
                        <div class="form-group">
                            <label>Upload Document (PDF, DOCX, TXT)</label>
                            <input type="file" id="custom-file-input" accept=".pdf,.docx,.txt" class="file-drop-area"
                                style="padding: 10px;">
                        </div>
                    </div>

                    <div class="modal-actions">
                        <button id="close-custom-modal" class="btn-secondary">Cancel</button>
                        <button id="generate-detailed-prompt-btn" class="btn-primary">Expand into Detailed
                            Prompt</button>
                    </div>
                </div>
            </div>

            <!-- Custom Post Review Modal (NEW) -->
            <div id="custom-review-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content wide">
                    <button class="close-modal-btn">&times;</button>
                    <h2>Review Detailed Prompt</h2>

                    <div id="custom-gen-status" class="hidden"
                        style="margin-bottom: 15px; text-align: center; color: var(--primary);">
                        <div class="mini-spinner"
                            style="margin: 0 auto 10px auto; width: 30px; height: 30px; border-width: 3px;"></div>
                        <span style="font-weight: 600;">AI Architect is expanding your prompt...</span>
                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">Analyzing themes and
                            drafting strategic angles</p>
                    </div>

                    <div id="custom-review-content">
                        <div class="form-group">
                            <label>AI-Generated Detailed Prompt (Edit as needed)</label>
                            <textarea id="custom-detailed-prompt" rows="10"
                                style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; font-family: inherit; font-size: 14px; line-height: 1.5;"></textarea>
                        </div>
                        <div class="modal-actions">
                            <button id="back-to-input-btn" class="btn-secondary">Back</button>
                            <button id="regenerate-prompt-btn" class="btn-secondary">Regenerate</button>
                            <button id="next-to-prefs-custom-btn" class="btn-primary">Next: Post Settings</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Preferences Modal -->
            <div id="pref-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <button class="close-modal-btn">&times;</button>
                    <h2>Generate LinkedIn Post</h2>
                    <div class="form-group">
                        <label>Post Tone</label>
                        <select id="tone-select">
                            <option value="Professional">Professional & Polished</option>
                            <option value="Insightful">Deeply Insightful</option>
                            <option value="Opinionated">Boldly Opinionated</option>
                            <option value="Founder-style">Founder / Personal Story</option>
                            <option value="Neutral">Objective & Neutral</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Target Audience</label>
                        <select id="audience-select">
                            <option value="Tech">Technology Leaders</option>
                            <option value="Legal">Legal & Policy Professionals</option>
                            <option value="Business">Business Executives</option>
                            <option value="General">General Professional</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Length</label>
                        <select id="length-select">
                            <option value="Short">Short (Hooks only)</option>
                            <option value="Medium" selected>Medium (Standard)</option>
                            <option value="Long">Long (Detailed analysis)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Link to Product (Optional)</label>
                        <select id="product-select" class="product-selector">
                            <option value="">None (Generic Industry News)</option>
                        </select>
                    </div>

                    <div id="generation-status" class="hidden">
                        <div class="mini-spinner"></div>
                    </div>

                    <div class="modal-actions">
                        <button id="close-modal" class="btn-secondary">Cancel</button>
                        <button id="next-to-image-btn" class="btn-primary">Next: Visual Style</button>
                    </div>
                </div>
            </div>

            <!-- Image Options Modal -->
            <div id="image-options-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <button class="close-modal-btn">&times;</button>
                    <h2>Custom Visual Style</h2>

                    <div class="form-divider">Image Generation Options</div>

                    <div class="form-group">
                        <label>Image Style</label>
                        <select id="style-select">
                            <option value="Minimalistic" selected>Minimalistic</option>
                            <option value="Futuristic">Futuristic</option>
                            <option value="Editorial / Infographic">Editorial / Infographic</option>
                            <option value="Data-centric">Data-centric</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Color Palette Preference</label>
                        <select id="palette-select">
                            <option value="Cool tones" selected>Cool tones</option>
                            <option value="Warm tones">Warm tones</option>
                            <option value="Multi-color vibrant">Multi-color vibrant</option>
                            <option value="Monochrome">Monochrome</option>
                        </select>
                    </div>

                    <div class="modal-actions">
                        <button id="close-image-options" class="btn-secondary">Back</button>
                        <button id="finalize-generate-btn" class="btn-primary">Generate Content</button>
                    </div>
                </div>
            </div>

            <!-- Manage Products Modal -->
            <div id="products-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <button class="close-modal-btn"
                        onclick="document.getElementById('products-modal').classList.add('hidden')">&times;</button>
                    <h2>Manage Products & Ventures</h2>

                    <div id="product-list" class="account-list"
                        style="max-height: 300px; overflow-y: auto; margin-bottom: 20px;">
                        <!-- Products injected here -->
                    </div>

                    <div class="form-divider">Add New Product</div>
                    <div class="form-group">
                        <label>Product Name</label>
                        <input type="text" id="new-product-name" placeholder="e.g. Simplii AI">
                    </div>
                    <div class="form-group">
                        <label>Description / Value Prop</label>
                        <textarea id="new-product-desc" rows="2"
                            style="width: 100%; border-radius: 12px; border: 1px solid var(--border); padding: 12px; font-family: inherit; margin-bottom: 10px;"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Website / Product URL</label>
                        <input type="text" id="new-product-url" placeholder="https://example.com"
                            style="margin-bottom: 10px;">
                    </div>

                    <div class="form-group">
                        <label>Documents (PDF, DOCX, TXT)</label>
                        <input type="file" id="new-product-docs" accept=".pdf,.docx,.txt" multiple
                            class="file-drop-area" style="padding: 10px; margin-bottom: 10px;">
                    </div>

                    <div class="form-group">
                        <label>Company Logo (PNG/Transparent recommended)</label>
                        <input type="file" id="new-product-logo" accept="image/*" class="file-drop-area"
                            style="padding: 10px; margin-bottom: 10px;">
                    </div>

                    <div class="form-group">
                        <label>Company Photos / Assets</label>
                        <input type="file" id="new-product-photos" accept="image/*" multiple class="file-drop-area"
                            style="padding: 10px; margin-bottom: 10px;">
                    </div>

                    <div class="modal-actions">
                        <button id="add-product-btn" class="btn-primary">Create Product</button>
                    </div>
                </div>
            </div>

            <!-- LinkedIn Accounts Management Modal -->
            <div id="linkedin-mgmt-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <button class="close-modal-btn"
                        onclick="document.getElementById('linkedin-mgmt-modal').classList.add('hidden')">&times;</button>
                    <h2>Connected LinkedIn Accounts</h2>
                    <div id="linkedin-accounts-list" class="account-list">
                        <!-- Accounts injected here -->
                    </div>
                    <div class="modal-actions">
                        <button id="connect-linkedin-btn" class="btn-primary">Connect another LinkedIn account</button>
                    </div>
                </div>
            </div>

            <!-- Scheduled Posts Management Modal -->
            <div id="scheduled-posts-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content wide">
                    <button class="close-modal-btn"
                        onclick="document.getElementById('scheduled-posts-modal').classList.add('hidden')">&times;</button>
                    <h2>Manage Scheduled Posts</h2>

                    <div id="scheduled-posts-list" class="account-list" style="max-height: 400px;">
                        <!-- Scheduled posts injected here -->
                    </div>

                    <div class="form-divider">Email Notifications</div>
                    <div class="form-group">
                        <label>Test Email Notification</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="test-email-input" placeholder="Enter your email" style="flex: 1;">
                            <button id="send-test-email-btn" class="btn-primary" style="width: auto;">Send Test</button>
                        </div>
                        <p style="font-size: 11px; color: var(--text-secondary); margin-top: 8px;">We'll send a
                            confirmation to this address when scheduled posts are published.</p>
                    </div>

                    <div class="modal-actions">
                        <button class="btn-secondary"
                            onclick="document.getElementById('scheduled-posts-modal').classList.add('hidden')">Close</button>
                    </div>
                </div>
            </div>

            <!-- Result Modal -->
            <div id="result-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content wide">
                    <button class="close-modal-btn">&times;</button>
                    <div class="modal-header-with-nav">
                        <button class="nav-btn prev-btn" id="prev-post-btn" title="Previous post">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polyline points="15,18 9,12 15,6"></polyline>
                            </svg>
                        </button>
                        <h2 id="result-modal-title">Your Curated Post</h2>
                        <button class="nav-btn next-btn" id="next-post-btn" title="Next post">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polyline points="9,18 15,12 9,6"></polyline>
                            </svg>
                        </button>
                    </div>
                    <div id="post-preview" class="post-preview"></div>

                    <!-- Manual Image Edit UI (Moved to static HTML for reliability) -->
                    <div id="image-edit-container" class="hidden"
                        style="margin-top: 15px; padding: 15px; background: #f8fafc; border: 1px solid var(--border); border-radius: 16px;">
                        <label
                            style="display: block; font-size: 0.8rem; font-weight: 600; margin-bottom: 8px; color: var(--text-secondary);">Describe
                            the changes you want in the image:</label>
                        <textarea id="image-edit-prompt"
                            placeholder="e.g. Change the background to dark blue, make the text larger..."
                            style="width: 100%; min-height: 80px; padding: 12px; border: 1px solid var(--border); border-radius: 12px; font-size: 0.9rem; margin-bottom: 12px; resize: vertical; font-family: inherit;"></textarea>
                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button id="cancel-edit-btn" class="btn-secondary"
                                style="padding: 8px 16px; font-size: 0.85rem;">Cancel</button>
                            <button id="submit-edit-btn" class="btn-primary"
                                style="padding: 8px 20px; font-size: 0.85rem;">Apply Edits</button>
                        </div>
                    </div>

                    <div class="form-group" style="margin: 15px 0;">
                        <label style="font-size: 13px; color: var(--text-secondary);">Post as:</label>
                        <select id="post-account-selector" class="linkedin-account-selector"
                            style="width: 100%; margin-top: 5px;"></select>
                    </div>

                    <!-- Scheduling Section -->
                    <div class="form-divider">Optional: Schedule for later</div>
                    <div class="form-group" style="margin: 10px 0;">
                        <label style="font-size: 13px; color: var(--text-secondary);">Notification Email:</label>
                        <input type="email" id="post-notification-email" placeholder="Enter email for confirmation"
                            style="width: 100%; margin-top: 5px; background: var(--bg); border: 1px solid var(--border); padding: 10px; border-radius: 8px;">
                    </div>
                    <div class="form-group" style="margin: 10px 0;">
                        <label style="font-size: 13px; color: var(--text-secondary);">Schedule Date & Time:</label>
                        <input type="datetime-local" id="post-schedule-time" style="width: 100%; margin-top: 5px;">
                    </div>

                    <div class="modal-actions">
                        <button id="edit-btn" class="btn-secondary">Back</button>
                        <button id="edit-image-btn-main" class="btn-secondary"
                            style="background: #f0f7ff; border: 1px solid #cce3ff;">Edit Design</button>
                        <button id="copy-caption-btn" class="btn-secondary">Copy Caption</button>
                        <button id="copy-image-btn" class="btn-secondary">Copy Image</button>
                        <button id="download-img-btn" class="btn-secondary">Download</button>
                        <button id="publish-btn" class="btn-primary">Post Now</button>
                        <button id="schedule-btn" class="btn-secondary"
                            style="background: var(--text); color: white;">Schedule Post</button>
                    </div>
                </div>
            </div>

            <!-- LinkedIn Blog: Step 1 (Category) -->
            <div id="blog-category-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <button class="close-modal-btn">&times;</button>
                    <h2>LinkedIn Blog: Choose Focus</h2>
                    <div class="category-grid"
                        style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px;">
                        <div class="blog-cat-box" data-cat="HealthTech">HealthTech</div>
                        <div class="blog-cat-box" data-cat="Legal">Legal</div>
                        <div class="blog-cat-box" data-cat="Judiciary AI">Judiciary AI</div>
                        <div class="blog-cat-box" data-cat="LLM Models">LLM Models</div>
                        <div class="blog-cat-box" data-cat="Media AI">Media AI</div>
                    </div>
                    <div class="modal-actions">
                        <button id="close-blog-cat-modal" class="btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>

            <!-- LinkedIn Blog: Step 2 (Settings) -->
            <div id="blog-settings-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <button class="close-modal-btn">&times;</button>
                    <h2 id="blog-settings-title">Blog Settings</h2>
                    <div class="form-group">
                        <label>Specific Topic (Optional)</label>
                        <input type="text" id="blog-topic-input" placeholder="e.g. Impact of AI on Radiology in 2026">
                    </div>
                    <div class="form-group">
                        <label>Tone</label>
                        <select id="blog-tone-select">
                            <option value="Professional">Professional</option>
                            <option value="Analytical">Analytical</option>
                            <option value="Neutral">Neutral</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Length</label>
                        <select id="blog-length-select">
                            <option value="LinkedIn Post">LinkedIn Post (< 1400 chars)</option>
                            <option value="Short">Short (400-600 words)</option>
                            <option value="Medium" selected>Medium (800-1000 words)</option>
                            <option value="Long">Long (1200+ words)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Link to Product (Optional)</label>
                        <select id="blog-product-select" class="product-selector">
                            <option value="">None (Generic industry piece)</option>
                        </select>
                    </div>

                    <div id="blog-status" class="hidden"
                        style="margin-top: 15px; text-align: center; color: var(--primary); font-weight: 500;">
                        <div class="mini-spinner"></div>
                        <span id="blog-status-text">Sourcing facts...</span>
                    </div>

                    <div class="modal-actions">
                        <button id="back-to-cats-btn" class="btn-secondary">Back</button>
                        <button id="generate-blog-btn" class="btn-primary">Generate Blog</button>
                    </div>
                </div>
            </div>

            <!-- Blog Result Modal -->
            <div id="blog-result-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content wide">
                    <button class="close-modal-btn">&times;</button>
                    <h2 id="blog-result-title">Generated Blog</h2>

                    <div id="blog-result-image-container"
                        style="display: none; margin-bottom: 20px; border-radius: 8px; overflow: hidden; border: 1px solid var(--border);">
                        <img id="blog-result-image" src="" alt="Blog Logo"
                            style="width: 100%; height: auto; display: block;">
                    </div>

                    <div id="blog-result-content" class="blog-result-content"
                        style="max-height: 400px; overflow-y: auto; padding: 20px; border: 1px solid var(--border); border-radius: 8px; background: white; white-space: pre-wrap; font-family: inherit; line-height: 1.6; font-size: 15px;">
                    </div>
                    <div class="form-group" style="margin: 15px 0;">
                        <label style="font-size: 13px; color: var(--text-secondary);">Post as:</label>
                        <select id="blog-account-selector" class="linkedin-account-selector"
                            style="width: 100%; margin-top: 5px;"></select>
                    </div>

                    <!-- Scheduling Section -->
                    <div class="form-divider">Optional: Schedule for later</div>
                    <div class="form-group" style="margin: 10px 0;">
                        <label style="font-size: 13px; color: var(--text-secondary);">Notification Email:</label>
                        <input type="email" id="blog-notification-email" placeholder="Enter email for confirmation"
                            style="width: 100%; margin-top: 5px; background: var(--bg); border: 1px solid var(--border); padding: 10px; border-radius: 8px;">
                    </div>
                    <div class="form-group" style="margin: 10px 0;">
                        <label style="font-size: 13px; color: var(--text-secondary);">Schedule Date & Time:</label>
                        <input type="datetime-local" id="blog-schedule-time" style="width: 100%; margin-top: 5px;">
                    </div>

                    <div class="modal-actions">
                        <button id="close-blog-result" class="btn-secondary">Close</button>
                        <button id="copy-blog-btn" class="btn-secondary">Copy Text</button>
                        <button id="copy-blog-image-btn" class="btn-secondary" style="display: none;">Copy
                            Image</button>
                        <button id="download-blog-img-btn" class="btn-secondary"
                            style="display: none;">Download</button>
                        <button id="publish-blog-btn" class="btn-primary">Post Now</button>
                        <button id="schedule-blog-btn" class="btn-secondary"
                            style="background: var(--text); color: white;">Schedule Blog</button>
                    </div>
                </div>
            </div>

            <!-- Settings Modal -->
            <div id="settings-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <button class="close-modal-btn">&times;</button>
                    <h2>Settings</h2>

                    <div class="form-divider">API Access</div>
                    <div class="form-group">
                        <label>Chrome Extension Token</label>
                        <div style="display: flex; gap: 8px; align-items: center;">
                            <input type="text" id="api-token-display" readonly
                                style="flex: 1; background: var(--bg); border: 1px solid var(--border); padding: 10px; border-radius: 6px; font-family: monospace; font-size: 12px;">
                            <button id="generate-token-btn" class="btn-primary"
                                style="padding: 8px 16px; font-size: 12px;">Generate</button>
                            <button id="copy-token-btn" class="btn-secondary"
                                style="padding: 8px 16px; font-size: 12px;">Copy</button>
                        </div>
                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                            Copy this token and paste it into the Chrome extension to enable URL importing.
                        </p>
                    </div>

                    <div class="modal-actions">
                        <button class="btn-secondary"
                            onclick="document.getElementById('settings-modal').classList.add('hidden')">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
        <script src="static/js/api.js?v=1.3"></script>
        <script src="static/js/social_listening.js?v=1.3"></script>
        <script src="static/js/linkedin_accounts.js"></script>
        <script src="static/js/products.js"></script>
        <script src="static/js/scheduler.js"></script>
        <script src="static/js/queue_panel.js"></script>
        <script src="static/js/image_options_modal.js"></script>
        <script src="static/js/blog_generator.js"></script>
        <script src="static/js/settings.js"></script>
        <script src="static/js/swipe.js?v=1.1"></script>
        <script src="static/js/upload_modal.js"></script>
</body>

</html>